<?xml version="1.0" encoding="UTF-8"?>

<!--
   The Hearsay Superfeedr bundle for Symfony2.
   Copyright (C) 2011 Hearsay News Products, Inc.
  
   This program is free software; you can redistribute it and/or modify it 
   under the terms of the GNU General Public License as published by the Free 
   Software Foundation; either version 2 of the License, or (at your option) any
   later version.
  
   This program is distributed in the hope that it will be useful, but WITHOUT 
   ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
   FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more 
   details.
  
   You should have received a copy of the GNU General Public License along with 
   this program; if not, write to the Free Software Foundation, Inc., 51 
   Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA. 
-->

<container xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">
    <parameters>
        <parameter type="string" key="hearsay_superfeedr.superfeedr.class">Hearsay\SuperfeedrBundle\Xmpp\Superfeedr</parameter>
        <parameter type="string" key="hearsay_superfeedr.username" />
        <parameter type="string" key="hearsay_superfeedr.password" />
        <parameter type="string" key="hearsay_superfeedr.listener_timeout" />
        <parameter key="hearsay_superfeedr.port">5222</parameter>
        <parameter type="string" key="hearsay_superfeedr.host">xmpp.superfeedr.com</parameter>
        <parameter type="string" key="hearsay_superfeedr.server">superfeedr.com</parameter>
    </parameters>
    <services>
        <service
            id="hearsay_superfeedr.superfeedr"
            class="%hearsay_superfeedr.superfeedr.class%" >
            <argument type="string">%hearsay_superfeedr.username%</argument>
            <argument type="string">%hearsay_superfeedr.password%</argument>
            <argument type="string">%hearsay_superfeedr.port%</argument>
            <argument type="string">%hearsay_superfeedr.host%</argument>
            <argument type="string">%hearsay_superfeedr.server%</argument>
            <call method="setHandler">
                <argument type="service" id="hearsay_superfeedr.event_handler" />
            </call>
            <call method="setLogger">
                <argument type="service" id="logger" />
            </call>
            <call method="setListenerTimeout">
                <argument>%hearsay_superfeedr.listener_timeout%</argument>
            </call>
            <tag name="monolog.logger" channel="superfeedr" />
        </service>
        <service
            id="hearsay_superfeedr.event_handler"
            class="Hearsay\SuperfeedrBundle\Handler\EventHandler"
            public="false" >
            <argument type="service" id="event_dispatcher" />
        </service>
        <service
            id="hearsay_superfeedr.test_subscriber"
            class="Hearsay\SuperfeedrBundle\Test\Subscriber"
            public="false" />
        <service id="hearsay_superfeedr.listener" alias="hearsay_superfeedr.superfeedr" />
    </services>
</container>
